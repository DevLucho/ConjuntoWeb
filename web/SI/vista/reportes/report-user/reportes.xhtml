<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
        <!-- Font righteous -->
        <link href="https://fonts.googleapis.com/css?family=Righteous&amp;display=swap" rel="stylesheet"/>
        <!-- Bootstrap 4 -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"/>
        <!-- Estilos -->
        <link rel="stylesheet" href="./reportes.css"/>
        <link rel="stylesheet" href="../../header/header.css"/>
        <link rel="stylesheet" href="../../nav/nav.css"/>
        <link rel="stylesheet" href="../../footer/footer.css"/>
        <link rel="shortcut icon" href="../../../img/logo2.png"/>
        <f:event type="preRenderView" listener="#{sesionControlador.verifSesion('../../../../vista/')}" />
        <script src="https://kit.fontawesome.com/7769f8ac48.js" crossorigin="anonymous"></script>
        <title>#{sesionControlador.rolSeleccionado.nombre} | Reportes</title>
        <style>
            h5{
                font-family: Righteous;
                font-size: 35px;
                color:#333333;
            }
            h6{
                font-family: Righteous;
                color: #2A6378;
                font-size: 20px;
            }
        </style>
    </h:head>
    <h:body>
        <f:view locale="#{lenguajeControlador.languageSelected}">
            <!-- Contenedor principal -->
            <div class="contenedor">
                <!-- header -->
                <ui:include src="../../header/header.xhtml"></ui:include>
                <!-- nav -->
                <ui:include src="../../nav/nav.xhtml"></ui:include>
                <!-- miga pan -->
                <div aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="../../pef-usuario/administrador/inicio-admin.xhtml">#{formconsultarusuario.bcInicio}</a></li>
                        <li class="breadcrumb-item active">Reportes</li>
                    </ol>
                </div>	
                <section class="container-fluid" id="principal">
                    <div class="row">
                        <div class="col-12">
                            <h3><i class="fas fa-chart-line"></i>Reportes</h3>
                            <hr/>	
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-12 text-center">
                            <h3><i class="fas fa-users" id="icono"></i>Reporte de Usuarios</h3>
                            <hr/>
                        </div>  
                    </div>
                    <!-- Inicio plantilla reporte-->
                    <div id="HTMLtoPDF" class="row" style="display: flex;flex-direction: row;justify-content: space-around;align-items: center; width: 100%;height: 40rem">
                        <div class="col-6" style="width: 45%; padding: 5rem">
                            <canvas id="grafica" width="350" height="350"></canvas>
                        </div>
                        <div class="col-6"  style="background-color: #e9ecef;display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 100%;padding: 2rem 0.5rem;">
                            <h5>Usuarios registrados por Rol</h5>
                            <div class="row" style="padding-left: 25px">
                                <div class="col-4" style="display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 3rem;">
                                    <h6>Ultimo Administrador</h6>
                                    <h:outputText value="#{usuarioControlador.obtenerUltimoDe(1)}"></h:outputText>
                                </div>
                                <div class="col-4" style="display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 3rem;">
                                    <h6>Ultimo Vigilante</h6>
                                    <h:outputText value="#{usuarioControlador.obtenerUltimoDe(3)}"></h:outputText>
                                </div>
                                <div class="col-4" style="display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 3rem;">
                                    <h6>Ultimo Residente</h6>
                                    <h:outputText value="#{usuarioControlador.obtenerUltimoDe(2)}"></h:outputText>
                                </div>
                            </div>
                             <div class="row" style="padding-left: 25px">
                                <div class="col-4" style="display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 3rem;">
                                    <img src="../administracion.png" width="120px" style="border-bottom: solid 5px black;padding-bottom: 15px" alt=""/>
                                </div>
                                <div class="col-4" style="display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 3rem;">
                                    <img src="../policia (1).png" width="120px" alt="" style="border-bottom: solid 5px black;padding-bottom: 15px"/>
                                </div>
                                <div class="col-4" style="display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 3rem;">
                                    <img src="../llaves.png" width="120px" alt="" style="border-bottom: solid 5px black; padding-bottom: 15px" />
                                </div>
                            </div>
                             <div class="row">
                                <div class="col-4" style="display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 3rem;"></div>
                                <div class="col-4" style="display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 3rem;"></div>
                                <div class="col-4" style="display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 3rem;"></div>
                            </div>
                        </div>
                    </div>
                    <!--Final plantilla reporte-->
                    <!--segunda plantilla reporte-->
                    <div id="HTMLtoPDF" class="row" style="display: flex;flex-direction: row;justify-content: space-around;align-items: center; width: 100%;height: 40rem;margin-bottom: 200px">
                        <div class="col-6"  style="background-color: #e9ecef;display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 100%;padding: 2rem 0.5rem;">
                            <h5>Reservas actuales</h5>
                            <div class="row" style="padding-left: 25px">
                                <div class="col-4" style="display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 3rem;">
                                    <h6>Ultimo Administrador</h6>
                                    <h:outputText value="#{usuarioControlador.obtenerUltimoDe(1)}"></h:outputText>
                                </div>
                                <div class="col-4" style="display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 3rem;">
                                    <h6>Ultimo Vigilante</h6>
                                    <h:outputText value="#{usuarioControlador.obtenerUltimoDe(3)}"></h:outputText>
                                </div>
                                <div class="col-4" style="display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 3rem;">
                                    <h6>Ultimo Residente</h6>
                                    <h:outputText value="#{usuarioControlador.obtenerUltimoDe(2)}"></h:outputText>
                                </div>
                            </div>
                             <div class="row" style="padding-left: 25px">
                                <div class="col-4" style="display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 3rem;">
                                    <img src="../administracion.png" width="120px" style="border-bottom: solid 5px black;padding-bottom: 15px" alt=""/>
                                </div>
                                <div class="col-4" style="display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 3rem;">
                                    <img src="../policia (1).png" width="120px" alt="" style="border-bottom: solid 5px black;padding-bottom: 15px"/>
                                </div>
                                <div class="col-4" style="display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 3rem;">
                                    <img src="../llaves.png" width="120px" alt="" style="border-bottom: solid 5px black; padding-bottom: 15px" />
                                </div>
                            </div>
                             <div class="row">
                                <div class="col-4" style="display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 3rem;"></div>
                                <div class="col-4" style="display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 3rem;"></div>
                                <div class="col-4" style="display: flex;flex-direction: column;justify-content: space-around;align-items: center; height: 3rem;"></div>
                            </div>
                        </div>
                        <div class="col-6" style="width: 45%; padding: 5rem">
                            <canvas id="bar-chart" width="400" height="450"></canvas>
                        </div>
                    </div>
                  	<!--
                    <div id="">
	<h2>HTML to PDF</h2>
	<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
	tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
	quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
	consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
	cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
	proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
	</div>
                    <a href="#" onclick="HTMLtoPDF()">Download PDF</a>
                    <h:form>
                        <h:commandButton onclick="HTMLtoPDF()" value="descargar"></h:commandButton>
                    </h:form>-->
                         <canvas id="line-chart" width="800" height="450"></canvas>
                </section> 
                <!-- footer -->
                <ui:include src="../../footer/footer.xhtml"></ui:include>
            </div>
        </f:view>
        <script src="html2pdf.bundle.min.js"></script>
        <script src="../../../js/jquery-2.1.3.js" type="text/javascript"></script>
        <script src="../../../js/jspdf.js" type="text/javascript"></script>
        <!-- bootstrap and jquery -->
        <script src="../../../../js/jquery-3.4.1.min.js"></script>
        <script src="../../../../js/bootstrap.min.js"></script>
        <!-- Menu responsive -->
        <script src="../../nav/nav.js"></script>
        <!-- Reporte -->
        <script src="../../../js/highcharts.js"></script>
        <script src="../../../js/exporting.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.js"></script>
        
        <!--<script>
            function DibujaGrafico(series) {
                var nom =#{rolControlador.contarRol()};
                Highcharts.chart('report-users', {
                    chart: {
                        plotBackgroundColor: '',
                        // #33406A #2A6378
                        plotBorderWidth: null,
                        plotShadow: false,
                        type: 'pie'
                    },
                    title: {
                        text: 'Reporte de Usuarios'
                    },
                    subtitle: {
                        text: 'Comparación cantidad de usuarios por rol'
                    },
                    tooltip: {
                        pointFormat: '{series.name}:{point.y} = (<b>{point.percentage:.1f}%</b>)'

                    },
                    accessibility: {
                        point: {
                            valueSuffix: '%'
                        }
                    },
                    plotOptions: {
                        pie: {
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: true,
                                format: '<b>{point.name}</b>: {point.y}'
                            }
                        }
                    },
                    series: [{
                            name: 'Cantidad - Porcentaje ',
                            colorByPoint: true,
                            data: series
                        }]
                });
            }
        </script>-->
        <script>
            var role = #{rolControlador.consultarRolNombre()};
            var dataUs = #{rolControlador.contadorUsuRol()};
            var colores = #{rolControlador.generarColores()};
            var ctx = document.getElementById("grafica").getContext("2d");
            var graf = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: role,
                    datasets: [{
                            label: "cosas",
                            data: dataUs,
                            backgroundColor: colores
                        }]
                }

            });
            var ctxx = document.getElementById("grafisa").getContext("2d");
            var graf = new Chart(ctxx, {
                type: 'pie',
                data: {
                    labels: role,
                    datasets: [{
                            label: "cosas",
                            data: dataUs,
                            backgroundColor: colores
                        }]
                }

            });
        </script>
        <script>
            var role = #{zonaComunalControlador.consultarNombreZona()};
            var dataUs = #{zonaComunalControlador.contarResZon()};
            var colores = #{rolControlador.generarColores()};
            new Chart(document.getElementById("bar-chart"), {
                type: 'bar',
                data: {
                  labels: role,
                  datasets: [
                    {
                      label: "Reservas Actuales:",
                      backgroundColor: colores,
                      data:dataUs,
                      borderColor:'black',
                      borderWidth:5
                    }
                  ]
                },
                options: {
                  legend: { display: false },
                  title: {
                    display: true,
                    text: 'Zonas Comunales'
                  },
                  scales:{
                    yAxes:[{
                            ticks:{
                                beginAtZero:true
                            }
                    }]
                  }
                }
            });
        </script>
       <!-- <script>
           var role = #{zonaComunalControlador.consultarNombreZona()};
           var dataUs = #{zonaComunalControlador.contarResZon()};
new Chart(document.getElementById("line-chart"), {
  type: 'line',
  data: {
    labels: meses,
    datasets: [{ 
        data: dateUs,
        label: "Africa",
        borderColor: "#3e95cd",
        fill: false
      }, { 
        data: dateUs,
        label: "Asia",
        borderColor: "#8e5ea2",
        fill: false
      }, { 
        data: dateUs,
        label: "Europe",
        borderColor: "#3cba9f",
        fill: false
      }
    ]
  },
  options: {
    title: {
      display: true,
      text: 'World population per region (in millions)'
    }
  }
});
        </script>
        <script>
            Highcharts.chart('report-zona-comun', {
                chart: {
                    type: 'spline',
                    plotBackgroundColor: '#33406A'
                },
                title: {
                    text: 'Reporte Zonas Comunes'
                },
                subtitle: {
                    text: 'Comparación de reserva en cada zona común'
                },
                xAxis: {
                    categories: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun',
                        'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic']
                },
                yAxis: {
                    title: {
                        text: 'N.de Reservas'
                    },
                },
                tooltip: {
                    crosshairs: true,
                    shared: true
                },
                plotOptions: {
                    spline: {
                        marker: {
                            radius: 4,
                            lineColor: '#666666',
                            lineWidth: 1
                        }
                    }
                },
                series: [{
                        name: 'Terraza Bbq',
                        marker: {
                            symbol: 'square'
                        },
                        data: [7, 6, 9, 14, 18, 21, 25, {
                                y: 26,
                            }, 23, 18, 13, 9]

                    }, {
                        name: 'Salon Sur',
                        marker: {
                            symbol: 'diamond'
                        },
                        data: [{
                                y: 3,
                            }, 4, 5, 8, 11, 15, 17, 16, 14, 10, 6, 8]
                    }
                    , {
                        name: 'Salon Norte',
                        marker: {
                            symbol: 'circle'
                        },
                        data: [{
                                y: 5,
                            }, 8, 3, 13, 15, 18, 22, 20, 15, 14, 10, 2]
                    }]
            });
        </script>
        -->
    </h:body>
</html>

